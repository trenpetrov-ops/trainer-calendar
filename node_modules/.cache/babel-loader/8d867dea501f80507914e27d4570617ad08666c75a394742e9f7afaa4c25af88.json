{"ast":null,"code":"var _jsxFileName = \"D:\\\\proects\\\\trainer-calendar\\\\src\\\\TrainerCalendar.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { addDays, startOfWeek, format, addWeeks, subWeeks, parseISO } from \"date-fns\";\nimport ruLocale from \"date-fns/locale/ru\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function TrainerCalendar() {\n  _s();\n  const [anchorDate, setAnchorDate] = useState(new Date());\n  const [bookings, setBookings] = useState(() => {\n    try {\n      return JSON.parse(localStorage.getItem(\"trainer_bookings_v_final\") || \"[]\");\n    } catch {\n      return [];\n    }\n  });\n  const [packages, setPackages] = useState(() => {\n    try {\n      return JSON.parse(localStorage.getItem(\"trainer_packages_v_final\") || \"{}\");\n    } catch {\n      return {};\n    }\n  });\n\n  // payments: { [clientName]: [ { amount: number|string, day: string } ] }\n  // we store only day (e.g. \"15\") so when user flips month the day stays and month displays from anchorDate\n  const [payments, setPayments] = useState(() => {\n    try {\n      return JSON.parse(localStorage.getItem(\"trainer_payments_v_final\") || \"{}\");\n    } catch {\n      return {};\n    }\n  });\n  const [modalOpen, setModalOpen] = useState(false);\n  const [modalDate, setModalDate] = useState(null);\n  const [modalHour, setModalHour] = useState(9);\n  const [modalClient, setModalClient] = useState(\"\");\n  const [packageModalOpen, setPackageModalOpen] = useState(false);\n  const [packageClient, setPackageClient] = useState(\"\");\n  const [packageSize, setPackageSize] = useState(10);\n  const [paymentModalOpen, setPaymentModalOpen] = useState(false);\n  const [paymentClient, setPaymentClient] = useState(\"\");\n  const [paymentAmount, setPaymentAmount] = useState(\"\");\n  const [paymentDay, setPaymentDay] = useState(\"\");\n  const [expandedClients, setExpandedClients] = useState({}); // which clients have expanded detail\n  const [selectedBooking, setSelectedBooking] = useState(null); // booking id that was clicked (shows delete button)\n\n  useEffect(() => {\n    localStorage.setItem(\"trainer_bookings_v_final\", JSON.stringify(bookings));\n  }, [bookings]);\n  useEffect(() => {\n    localStorage.setItem(\"trainer_packages_v_final\", JSON.stringify(packages));\n  }, [packages]);\n  useEffect(() => {\n    localStorage.setItem(\"trainer_payments_v_final\", JSON.stringify(payments));\n  }, [payments]);\n  function startOfWeekFor(date) {\n    return startOfWeek(date, {\n      weekStartsOn: 1\n    });\n  }\n  function weekDays(baseDate) {\n    const start = startOfWeekFor(baseDate);\n    return Array.from({\n      length: 7\n    }).map((_, i) => addDays(start, i));\n  }\n  const HOURS = Array.from({\n    length: 15\n  }).map((_, i) => 7 + i);\n  function formatHourForTH(hour) {\n    return `${String(hour).padStart(2, \"0\")}:00`;\n  }\n  function formatHourForRU(thHour) {\n    // Русское время = Тайское - 4 часа (displayed as TH - 4)\n    const ru = (thHour + 24 - 4) % 24;\n    return `${String(ru).padStart(2, \"0\")}:00`;\n  }\n  function openBookingModal(date, hour) {\n    setModalDate(date);\n    setModalHour(hour);\n    // default to first active client if exists\n    const active = activeClients();\n    setModalClient(active.length > 0 ? active[0] : \"\");\n    setModalOpen(true);\n  }\n  function activeClients() {\n    return Object.entries(packages).filter(([_, pkgList]) => {\n      if (!pkgList || pkgList.length === 0) return false;\n      const current = pkgList[pkgList.length - 1];\n      return current && current.used < current.size;\n    }).map(([name]) => name);\n  }\n  function addBooking() {\n    const name = modalClient.trim();\n    if (!name) {\n      alert(\"Выберите клиента из списка.\");\n      return;\n    }\n    const pkgList = packages[name] || [];\n    const currentPkg = pkgList[pkgList.length - 1];\n    if (!currentPkg) {\n      alert(\"Сначала добавьте пакет для этого клиента.\");\n      return;\n    }\n    if (currentPkg.used >= currentPkg.size) {\n      alert(\"У клиента закончился пакет.\");\n      return;\n    }\n    const dateISO = modalDate.toISOString().slice(0, 10);\n    const exists = bookings.some(b => b.dateISO === dateISO && b.hour === modalHour);\n    if (exists) {\n      alert(\"На это время уже есть запись.\");\n      return;\n    }\n    const id = Date.now() + \"-\" + Math.random().toString(36).slice(2, 9);\n    const sessionNumber = currentPkg.used + 1;\n    setBookings(prev => [...prev, {\n      id,\n      dateISO,\n      hour: modalHour,\n      clientName: name,\n      packageIndex: pkgList.length - 1,\n      sessionNumber\n    }]);\n    setPackages(prev => {\n      const copy = {\n        ...prev\n      };\n      const list = [...(copy[name] || [])];\n      const last = {\n        ...list[list.length - 1]\n      };\n      last.used = (last.used || 0) + 1;\n      list[list.length - 1] = last;\n      copy[name] = list;\n      return copy;\n    });\n    setModalOpen(false);\n  }\n  function bookingsForDayHour(date, hour) {\n    const dateISO = date.toISOString().slice(0, 10);\n    return bookings.filter(b => b.dateISO === dateISO && b.hour === hour);\n  }\n  function deleteBooking(id) {\n    if (!confirm(\"Удалить запись?\")) return;\n    const b = bookings.find(x => x.id === id);\n    if (b) {\n      setPackages(prev => {\n        const copy = {\n          ...prev\n        };\n        const list = copy[b.clientName] ? [...copy[b.clientName]] : [];\n        if (list[b.packageIndex]) {\n          list[b.packageIndex] = {\n            ...list[b.packageIndex],\n            used: Math.max(0, list[b.packageIndex].used - 1)\n          };\n        }\n        copy[b.clientName] = list;\n        return copy;\n      });\n    }\n    setBookings(prev => prev.filter(x => x.id !== id));\n    setSelectedBooking(null);\n  }\n  function openPackageModal(clientName) {\n    setPackageClient(clientName || \"\");\n    setPackageSize(10);\n    setPackageModalOpen(true);\n  }\n  function savePackage() {\n    const name = packageClient.trim();\n    if (!name) return;\n    const list = packages[name] || [];\n    const current = list[list.length - 1];\n    if (current && current.used < current.size) {\n      alert(\"Нельзя добавить новый пакет, пока старый не израсходован.\");\n      return;\n    }\n    const newPkg = {\n      size: packageSize,\n      used: 0\n    };\n    setPackages(prev => ({\n      ...prev,\n      [name]: [...(prev[name] || []), newPkg]\n    }));\n    setPackageModalOpen(false);\n  }\n  function openPaymentModal(clientName) {\n    setPaymentClient(clientName || \"\");\n    setPaymentAmount(\"\");\n    setPaymentDay(\"\");\n    setPaymentModalOpen(true);\n  }\n  function savePayment() {\n    const name = paymentClient.trim();\n    if (!name) {\n      alert(\"Введите имя клиента.\");\n      return;\n    }\n    if (!paymentAmount) {\n      alert(\"Введите сумму.\");\n      return;\n    }\n    if (!paymentDay) {\n      alert(\"Введите число (день месяца).\");\n      return;\n    }\n    const newPayment = {\n      amount: paymentAmount,\n      day: paymentDay\n    };\n    setPayments(prev => ({\n      ...prev,\n      [name]: [...(prev[name] || []), newPayment]\n    }));\n    setPaymentModalOpen(false);\n  }\n  function toggleClientExpand(name) {\n    setExpandedClients(prev => ({\n      ...prev,\n      [name]: !prev[name]\n    }));\n  }\n\n  // remove client from lists (packages/payments) but KEEP calendar bookings\n  function removeClientFromList(name) {\n    if (!confirm(\"Удалить клиента из списка? (Записи в календаре останутся)\")) return;\n    setPackages(prev => {\n      const copy = {\n        ...prev\n      };\n      delete copy[name];\n      return copy;\n    });\n    setPayments(prev => {\n      const copy = {\n        ...prev\n      };\n      delete copy[name];\n      return copy;\n    });\n  }\n  function removePayment(name, index) {\n    setPayments(prev => {\n      const copy = {\n        ...(prev || {})\n      };\n      if (!copy[name]) return prev;\n      copy[name] = copy[name].filter((_, i) => i !== index);\n      return copy;\n    });\n  }\n\n  // helper to format booking date for expanded list\n  function formatBookingDate(dateISO) {\n    try {\n      const parsed = parseISO(dateISO);\n      return format(parsed, \"d LLL\", {\n        locale: ruLocale\n      });\n    } catch {\n      return dateISO;\n    }\n  }\n\n  // helper render of payments - show day + month from anchorDate\n  function renderPaymentLabel(pay) {\n    const monthName = format(anchorDate, \"LLL\", {\n      locale: ruLocale\n    });\n    return `${pay.amount}₽ (${pay.day} ${monthName})`;\n  }\n\n  // click outside handler - clicking top-level container clears selected booking\n  function onContainerClick() {\n    setSelectedBooking(null);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 font-sans max-w-full overflow-x-auto\",\n    onClick: onContainerClick,\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"flex items-center justify-between mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-xl font-bold\",\n        children: \"\\u0422\\u0440\\u0435\\u043D\\u0438\\u0440\\u043E\\u0432\\u043E\\u0447\\u043D\\u044B\\u0439 \\u043A\\u0430\\u043B\\u0435\\u043D\\u0434\\u0430\\u0440\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setAnchorDate(subWeeks(anchorDate, 1)),\n          className: \"px-2 py-1 bg-gray-100 rounded\",\n          children: \"\\u2190 \\u041D\\u0435\\u0434\\u0435\\u043B\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setAnchorDate(new Date()),\n          className: \"px-2 py-1 bg-gray-100 rounded\",\n          children: \"\\u0421\\u0435\\u0433\\u043E\\u0434\\u043D\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setAnchorDate(addWeeks(anchorDate, 1)),\n          className: \"px-2 py-1 bg-gray-100 rounded\",\n          children: \"\\u041D\\u0435\\u0434\\u0435\\u043B\\u044F \\u2192\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"border-collapse w-full text-sm\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"border px-2 py-1 bg-yellow-300\",\n            children: [\"\\u0422\\u0430\\u0439\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 63\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs\",\n              children: \"(UTC+7)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 68\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"border px-2 py-1 bg-gray-300\",\n            children: [\"\\u0420\\u0443\\u0441\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 61\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs\",\n              children: \"(UTC+3)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 66\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this), weekDays(anchorDate).map((day, idx) => /*#__PURE__*/_jsxDEV(\"th\", {\n            className: `border px-2 py-1 ${idx >= 5 ? \"bg-orange-100\" : \"bg-red-100\"}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-bold\",\n              children: format(day, \"d LLL\", {\n                locale: ruLocale\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: format(day, \"EEE\", {\n                locale: ruLocale\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 17\n            }, this)]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: HOURS.map(h => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"border px-2 py-1 text-center bg-yellow-100\",\n            children: formatHourForTH(h)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"border px-2 py-1 text-center bg-gray-100\",\n            children: formatHourForRU(h)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 15\n          }, this), weekDays(anchorDate).map((day, idx) => /*#__PURE__*/_jsxDEV(\"td\", {\n            className: `border align-top px-2 py-1 ${idx >= 5 ? \"bg-orange-50\" : \"\"}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col gap-1\",\n              children: [bookingsForDayHour(day, h).map(b => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-blue-100 rounded px-1 flex justify-between items-center cursor-pointer\",\n                onClick: e => {\n                  e.stopPropagation();\n                  setSelectedBooking(selectedBooking === b.id ? null : b.id);\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"truncate max-w-[140px] text-center\",\n                  children: [b.clientName, \" - \", b.sessionNumber]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 25\n                }, this), selectedBooking === b.id && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: e => {\n                    e.stopPropagation();\n                    deleteBooking(b.id);\n                  },\n                  className: \"text-red-500 text-xs ml-2\",\n                  children: \"\\u2715\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 303,\n                  columnNumber: 27\n                }, this)]\n              }, b.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 23\n              }, this)), bookingsForDayHour(day, h).length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-6 flex items-center\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: e => {\n                    e.stopPropagation();\n                    openBookingModal(day, h);\n                  },\n                  className: \"text-xs text-green-600\",\n                  children: \"+ \\u0434\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 19\n            }, this)\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 17\n          }, this))]\n        }, h, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6 p-4 border rounded bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"font-semibold mb-2\",\n        children: \"\\u041F\\u0440\\u043E\\u0433\\u0440\\u0435\\u0441\\u0441 \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\\u043E\\u0432\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"space-y-2\",\n        children: [Object.entries(packages).map(([name, pkgList]) => {\n          var _payments$name;\n          const currentPkg = pkgList[pkgList.length - 1];\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"flex flex-col\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center cursor-pointer\",\n              onClick: e => {\n                e.stopPropagation();\n                toggleClientExpand(name);\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-semibold\",\n                  children: name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-600\",\n                  children: currentPkg ? `${currentPkg.used}/${currentPkg.size}` : \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [(_payments$name = payments[name]) === null || _payments$name === void 0 ? void 0 : _payments$name.map((pay, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs text-gray-600\",\n                    children: renderPaymentLabel(pay)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 336,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: e => {\n                      e.stopPropagation();\n                      removePayment(name, i);\n                    },\n                    className: \"text-red-400 text-[10px]\",\n                    children: \"\\u2715\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 337,\n                    columnNumber: 25\n                  }, this)]\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 335,\n                  columnNumber: 23\n                }, this)), currentPkg && currentPkg.used >= currentPkg.size && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: e => {\n                    e.stopPropagation();\n                    removeClientFromList(name);\n                  },\n                  className: \"text-red-500 text-xs\",\n                  children: \"\\u2715\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 341,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 17\n            }, this), expandedClients[name] && /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"text-xs text-gray-600 ml-4 list-disc mt-1\",\n              children: [bookings.filter(b => b.clientName === name).map(b => /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [b.sessionNumber, \"/\", packages[name] && packages[name][b.packageIndex] ? packages[name][b.packageIndex].size : \"?\", \" \\u2013 \", formatBookingDate(b.dateISO)]\n              }, b.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 23\n              }, this)), bookings.filter(b => b.clientName === name).length === 0 && /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"\\u041D\\u0435\\u0442 \\u0437\\u0430\\u043F\\u0438\\u0441\\u0435\\u0439\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 19\n            }, this)]\n          }, name, true, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 15\n          }, this);\n        }), Object.keys(packages).length === 0 && /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"text-sm text-gray-500\",\n          children: \"\\u041D\\u0435\\u0442 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 50\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 flex gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => openPackageModal(\"\"),\n          className: \"text-xs text-green-600\",\n          children: \"+ \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u0430\\u043A\\u0435\\u0442 \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\\u0443\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => openPaymentModal(\"\"),\n          className: \"text-xs text-green-600\",\n          children: \"+ \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u043F\\u043B\\u0430\\u0442\\u0443\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 7\n    }, this), modalOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black/40 flex items-center justify-center z-50\",\n      onClick: () => setModalOpen(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-4 rounded w-80\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold mb-2\",\n          children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm mb-2\",\n          children: [modalDate && format(modalDate, \"d LLL (EEE)\", {\n            locale: ruLocale\n          }), \" \\u2014 \", formatHourForTH(modalHour), \" (TH) / \", formatHourForRU(modalHour), \" (RU)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: modalClient,\n          onChange: e => setModalClient(e.target.value),\n          className: \"border w-full px-2 py-1 rounded mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 15\n          }, this), activeClients().map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: c,\n            children: c\n          }, c, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 43\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: addBooking,\n            className: \"flex-1 bg-blue-600 text-white py-1 rounded\",\n            children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setModalOpen(false),\n            className: \"flex-1 bg-gray-200 py-1 rounded\",\n            children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 9\n    }, this), packageModalOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black/40 flex items-center justify-center z-50\",\n      onClick: () => setPackageModalOpen(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-4 rounded w-80\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold mb-2\",\n          children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u0430\\u043A\\u0435\\u0442\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: packageClient,\n          onChange: e => setPackageClient(e.target.value),\n          placeholder: \"\\u0418\\u043C\\u044F \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\\u0430\",\n          className: \"border w-full px-2 py-1 rounded mb-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: packageSize,\n          onChange: e => setPackageSize(Number(e.target.value)),\n          className: \"border w-full px-2 py-1 rounded mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: 10,\n            children: \"\\u041F\\u0430\\u043A\\u0435\\u0442 10\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: 20,\n            children: \"\\u041F\\u0430\\u043A\\u0435\\u0442 20\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: savePackage,\n            className: \"flex-1 bg-blue-600 text-white py-1 rounded\",\n            children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setPackageModalOpen(false),\n            className: \"flex-1 bg-gray-200 py-1 rounded\",\n            children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 9\n    }, this), paymentModalOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black/40 flex items-center justify-center z-50\",\n      onClick: () => setPaymentModalOpen(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-4 rounded w-80\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold mb-2\",\n          children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u043F\\u043B\\u0430\\u0442\\u0443\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: paymentClient,\n          onChange: e => setPaymentClient(e.target.value),\n          className: \"border w-full px-2 py-1 rounded mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 15\n          }, this), Object.keys(packages).map(k => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: k,\n            children: k\n          }, k, false, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 49\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: paymentAmount,\n          onChange: e => setPaymentAmount(e.target.value),\n          placeholder: \"\\u0421\\u0443\\u043C\\u043C\\u0430 (\\u043D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440, 12000)\",\n          className: \"border w-full px-2 py-1 rounded mb-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: paymentDay,\n          onChange: e => setPaymentDay(e.target.value),\n          placeholder: \"\\u0427\\u0438\\u0441\\u043B\\u043E \\u043C\\u0435\\u0441\\u044F\\u0446\\u0430 (\\u043D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440, 15)\",\n          className: \"border w-full px-2 py-1 rounded mb-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: savePayment,\n            className: \"flex-1 bg-blue-600 text-white py-1 rounded\",\n            children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setPaymentModalOpen(false),\n            className: \"flex-1 bg-gray-200 py-1 rounded\",\n            children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 264,\n    columnNumber: 5\n  }, this);\n}\n_s(TrainerCalendar, \"Lq1Nwe7AFhFSz00HUN6zNEIWaus=\");\n_c = TrainerCalendar;\nvar _c;\n$RefreshReg$(_c, \"TrainerCalendar\");","map":{"version":3,"names":["React","useState","useEffect","addDays","startOfWeek","format","addWeeks","subWeeks","parseISO","ruLocale","jsxDEV","_jsxDEV","TrainerCalendar","_s","anchorDate","setAnchorDate","Date","bookings","setBookings","JSON","parse","localStorage","getItem","packages","setPackages","payments","setPayments","modalOpen","setModalOpen","modalDate","setModalDate","modalHour","setModalHour","modalClient","setModalClient","packageModalOpen","setPackageModalOpen","packageClient","setPackageClient","packageSize","setPackageSize","paymentModalOpen","setPaymentModalOpen","paymentClient","setPaymentClient","paymentAmount","setPaymentAmount","paymentDay","setPaymentDay","expandedClients","setExpandedClients","selectedBooking","setSelectedBooking","setItem","stringify","startOfWeekFor","date","weekStartsOn","weekDays","baseDate","start","Array","from","length","map","_","i","HOURS","formatHourForTH","hour","String","padStart","formatHourForRU","thHour","ru","openBookingModal","active","activeClients","Object","entries","filter","pkgList","current","used","size","name","addBooking","trim","alert","currentPkg","dateISO","toISOString","slice","exists","some","b","id","now","Math","random","toString","sessionNumber","prev","clientName","packageIndex","copy","list","last","bookingsForDayHour","deleteBooking","confirm","find","x","max","openPackageModal","savePackage","newPkg","openPaymentModal","savePayment","newPayment","amount","day","toggleClientExpand","removeClientFromList","removePayment","index","formatBookingDate","parsed","locale","renderPaymentLabel","pay","monthName","onContainerClick","className","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","idx","h","e","stopPropagation","_payments$name","keys","value","onChange","target","c","type","placeholder","Number","k","_c","$RefreshReg$"],"sources":["D:/proects/trainer-calendar/src/TrainerCalendar.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { addDays, startOfWeek, format, addWeeks, subWeeks, parseISO } from \"date-fns\";\nimport ruLocale from \"date-fns/locale/ru\";\n\nexport default function TrainerCalendar() {\n  const [anchorDate, setAnchorDate] = useState(new Date());\n\n  const [bookings, setBookings] = useState(() => {\n    try {\n      return JSON.parse(localStorage.getItem(\"trainer_bookings_v_final\") || \"[]\");\n    } catch {\n      return [];\n    }\n  });\n\n  const [packages, setPackages] = useState(() => {\n    try {\n      return JSON.parse(localStorage.getItem(\"trainer_packages_v_final\") || \"{}\");\n    } catch {\n      return {};\n    }\n  });\n\n  // payments: { [clientName]: [ { amount: number|string, day: string } ] }\n  // we store only day (e.g. \"15\") so when user flips month the day stays and month displays from anchorDate\n  const [payments, setPayments] = useState(() => {\n    try {\n      return JSON.parse(localStorage.getItem(\"trainer_payments_v_final\") || \"{}\");\n    } catch {\n      return {};\n    }\n  });\n\n  const [modalOpen, setModalOpen] = useState(false);\n  const [modalDate, setModalDate] = useState(null);\n  const [modalHour, setModalHour] = useState(9);\n  const [modalClient, setModalClient] = useState(\"\");\n  const [packageModalOpen, setPackageModalOpen] = useState(false);\n  const [packageClient, setPackageClient] = useState(\"\");\n  const [packageSize, setPackageSize] = useState(10);\n\n  const [paymentModalOpen, setPaymentModalOpen] = useState(false);\n  const [paymentClient, setPaymentClient] = useState(\"\");\n  const [paymentAmount, setPaymentAmount] = useState(\"\");\n  const [paymentDay, setPaymentDay] = useState(\"\");\n\n  const [expandedClients, setExpandedClients] = useState({}); // which clients have expanded detail\n  const [selectedBooking, setSelectedBooking] = useState(null); // booking id that was clicked (shows delete button)\n\n  useEffect(() => {\n    localStorage.setItem(\"trainer_bookings_v_final\", JSON.stringify(bookings));\n  }, [bookings]);\n\n  useEffect(() => {\n    localStorage.setItem(\"trainer_packages_v_final\", JSON.stringify(packages));\n  }, [packages]);\n\n  useEffect(() => {\n    localStorage.setItem(\"trainer_payments_v_final\", JSON.stringify(payments));\n  }, [payments]);\n\n  function startOfWeekFor(date) {\n    return startOfWeek(date, { weekStartsOn: 1 });\n  }\n\n  function weekDays(baseDate) {\n    const start = startOfWeekFor(baseDate);\n    return Array.from({ length: 7 }).map((_, i) => addDays(start, i));\n  }\n\n  const HOURS = Array.from({ length: 15 }).map((_, i) => 7 + i);\n\n  function formatHourForTH(hour) {\n    return `${String(hour).padStart(2, \"0\")}:00`;\n  }\n  function formatHourForRU(thHour) {\n    // Русское время = Тайское - 4 часа (displayed as TH - 4)\n    const ru = (thHour + 24 - 4) % 24;\n    return `${String(ru).padStart(2, \"0\")}:00`;\n  }\n\n  function openBookingModal(date, hour) {\n    setModalDate(date);\n    setModalHour(hour);\n    // default to first active client if exists\n    const active = activeClients();\n    setModalClient(active.length > 0 ? active[0] : \"\");\n    setModalOpen(true);\n  }\n\n  function activeClients() {\n    return Object.entries(packages)\n      .filter(([_, pkgList]) => {\n        if (!pkgList || pkgList.length === 0) return false;\n        const current = pkgList[pkgList.length - 1];\n        return current && current.used < current.size;\n      })\n      .map(([name]) => name);\n  }\n\n  function addBooking() {\n    const name = modalClient.trim();\n    if (!name) {\n      alert(\"Выберите клиента из списка.\");\n      return;\n    }\n    const pkgList = packages[name] || [];\n    const currentPkg = pkgList[pkgList.length - 1];\n    if (!currentPkg) {\n      alert(\"Сначала добавьте пакет для этого клиента.\");\n      return;\n    }\n    if (currentPkg.used >= currentPkg.size) {\n      alert(\"У клиента закончился пакет.\");\n      return;\n    }\n\n    const dateISO = modalDate.toISOString().slice(0, 10);\n    const exists = bookings.some((b) => b.dateISO === dateISO && b.hour === modalHour);\n    if (exists) {\n      alert(\"На это время уже есть запись.\");\n      return;\n    }\n\n    const id = Date.now() + \"-\" + Math.random().toString(36).slice(2, 9);\n    const sessionNumber = currentPkg.used + 1;\n    setBookings((prev) => [\n      ...prev,\n      { id, dateISO, hour: modalHour, clientName: name, packageIndex: pkgList.length - 1, sessionNumber },\n    ]);\n\n    setPackages((prev) => {\n      const copy = { ...prev };\n      const list = [...(copy[name] || [])];\n      const last = { ...list[list.length - 1] };\n      last.used = (last.used || 0) + 1;\n      list[list.length - 1] = last;\n      copy[name] = list;\n      return copy;\n    });\n\n    setModalOpen(false);\n  }\n\n  function bookingsForDayHour(date, hour) {\n    const dateISO = date.toISOString().slice(0, 10);\n    return bookings.filter((b) => b.dateISO === dateISO && b.hour === hour);\n  }\n\n  function deleteBooking(id) {\n    if (!confirm(\"Удалить запись?\")) return;\n    const b = bookings.find((x) => x.id === id);\n    if (b) {\n      setPackages((prev) => {\n        const copy = { ...prev };\n        const list = copy[b.clientName] ? [...copy[b.clientName]] : [];\n        if (list[b.packageIndex]) {\n          list[b.packageIndex] = { ...list[b.packageIndex], used: Math.max(0, list[b.packageIndex].used - 1) };\n        }\n        copy[b.clientName] = list;\n        return copy;\n      });\n    }\n    setBookings((prev) => prev.filter((x) => x.id !== id));\n    setSelectedBooking(null);\n  }\n\n  function openPackageModal(clientName) {\n    setPackageClient(clientName || \"\");\n    setPackageSize(10);\n    setPackageModalOpen(true);\n  }\n\n  function savePackage() {\n    const name = packageClient.trim();\n    if (!name) return;\n    const list = packages[name] || [];\n    const current = list[list.length - 1];\n    if (current && current.used < current.size) {\n      alert(\"Нельзя добавить новый пакет, пока старый не израсходован.\");\n      return;\n    }\n    const newPkg = { size: packageSize, used: 0 };\n    setPackages((prev) => ({ ...prev, [name]: [...(prev[name] || []), newPkg] }));\n    setPackageModalOpen(false);\n  }\n\n  function openPaymentModal(clientName) {\n    setPaymentClient(clientName || \"\");\n    setPaymentAmount(\"\");\n    setPaymentDay(\"\");\n    setPaymentModalOpen(true);\n  }\n\n  function savePayment() {\n    const name = paymentClient.trim();\n    if (!name) {\n      alert(\"Введите имя клиента.\");\n      return;\n    }\n    if (!paymentAmount) {\n      alert(\"Введите сумму.\");\n      return;\n    }\n    if (!paymentDay) {\n      alert(\"Введите число (день месяца).\");\n      return;\n    }\n    const newPayment = { amount: paymentAmount, day: paymentDay };\n    setPayments((prev) => ({ ...prev, [name]: [...(prev[name] || []), newPayment] }));\n    setPaymentModalOpen(false);\n  }\n\n  function toggleClientExpand(name) {\n    setExpandedClients((prev) => ({ ...prev, [name]: !prev[name] }));\n  }\n\n  // remove client from lists (packages/payments) but KEEP calendar bookings\n  function removeClientFromList(name) {\n    if (!confirm(\"Удалить клиента из списка? (Записи в календаре останутся)\")) return;\n    setPackages((prev) => {\n      const copy = { ...prev };\n      delete copy[name];\n      return copy;\n    });\n    setPayments((prev) => {\n      const copy = { ...prev };\n      delete copy[name];\n      return copy;\n    });\n  }\n\n  function removePayment(name, index) {\n    setPayments((prev) => {\n      const copy = { ...(prev || {}) };\n      if (!copy[name]) return prev;\n      copy[name] = copy[name].filter((_, i) => i !== index);\n      return copy;\n    });\n  }\n\n  // helper to format booking date for expanded list\n  function formatBookingDate(dateISO) {\n    try {\n      const parsed = parseISO(dateISO);\n      return format(parsed, \"d LLL\", { locale: ruLocale });\n    } catch {\n      return dateISO;\n    }\n  }\n\n  // helper render of payments - show day + month from anchorDate\n  function renderPaymentLabel(pay) {\n    const monthName = format(anchorDate, \"LLL\", { locale: ruLocale });\n    return `${pay.amount}₽ (${pay.day} ${monthName})`;\n  }\n\n  // click outside handler - clicking top-level container clears selected booking\n  function onContainerClick() {\n    setSelectedBooking(null);\n  }\n\n  return (\n    <div className=\"p-4 font-sans max-w-full overflow-x-auto\" onClick={onContainerClick}>\n      <header className=\"flex items-center justify-between mb-4\">\n        <h1 className=\"text-xl font-bold\">Тренировочный календарь</h1>\n        <div className=\"flex gap-2\">\n          <button onClick={() => setAnchorDate(subWeeks(anchorDate, 1))} className=\"px-2 py-1 bg-gray-100 rounded\">← Неделя</button>\n          <button onClick={() => setAnchorDate(new Date())} className=\"px-2 py-1 bg-gray-100 rounded\">Сегодня</button>\n          <button onClick={() => setAnchorDate(addWeeks(anchorDate, 1))} className=\"px-2 py-1 bg-gray-100 rounded\">Неделя →</button>\n        </div>\n      </header>\n\n      <table className=\"border-collapse w-full text-sm\">\n        <thead>\n          <tr>\n            <th className=\"border px-2 py-1 bg-yellow-300\">Тай<br/><span className=\"text-xs\">(UTC+7)</span></th>\n            <th className=\"border px-2 py-1 bg-gray-300\">Рус<br/><span className=\"text-xs\">(UTC+3)</span></th>\n            {weekDays(anchorDate).map((day, idx) => (\n              <th key={idx} className={`border px-2 py-1 ${idx >= 5 ? \"bg-orange-100\" : \"bg-red-100\"}`}>\n                <div className=\"font-bold\">{format(day, \"d LLL\", { locale: ruLocale })}</div>\n                <div>{format(day, \"EEE\", { locale: ruLocale })}</div>\n              </th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          {HOURS.map((h) => (\n            <tr key={h}>\n              <td className=\"border px-2 py-1 text-center bg-yellow-100\">{formatHourForTH(h)}</td>\n              <td className=\"border px-2 py-1 text-center bg-gray-100\">{formatHourForRU(h)}</td>\n              {weekDays(anchorDate).map((day, idx) => (\n                <td key={idx} className={`border align-top px-2 py-1 ${idx >= 5 ? \"bg-orange-50\" : \"\"}`}>\n                  <div className=\"flex flex-col gap-1\">\n                    {bookingsForDayHour(day, h).map((b) => (\n                      <div\n                        key={b.id}\n                        className=\"bg-blue-100 rounded px-1 flex justify-between items-center cursor-pointer\"\n                        onClick={(e) => { e.stopPropagation(); setSelectedBooking(selectedBooking === b.id ? null : b.id); }}\n                      >\n                        <span className=\"truncate max-w-[140px] text-center\">{b.clientName} - {b.sessionNumber}</span>\n                        {selectedBooking === b.id && (\n                          <button onClick={(e) => { e.stopPropagation(); deleteBooking(b.id); }} className=\"text-red-500 text-xs ml-2\">✕</button>\n                        )}\n                      </div>\n                    ))}\n                    {bookingsForDayHour(day, h).length === 0 && (\n                      <div className=\"h-6 flex items-center\">\n                        <button onClick={(e) => { e.stopPropagation(); openBookingModal(day, h); }} className=\"text-xs text-green-600\">+ добавить</button>\n                      </div>\n                    )}\n                  </div>\n                </td>\n              ))}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      <div className=\"mt-6 p-4 border rounded bg-gray-50\">\n        <h2 className=\"font-semibold mb-2\">Прогресс клиентов</h2>\n        <ul className=\"space-y-2\">\n          {Object.entries(packages).map(([name, pkgList]) => {\n            const currentPkg = pkgList[pkgList.length - 1];\n            return (\n              <li key={name} className=\"flex flex-col\">\n                <div className=\"flex justify-between items-center cursor-pointer\" onClick={(e) => { e.stopPropagation(); toggleClientExpand(name); }}>\n                  <div className=\"flex items-center gap-3\">\n                    <span className=\"font-semibold\">{name}</span>\n                    <span className=\"text-xs text-gray-600\">{currentPkg ? `${currentPkg.used}/${currentPkg.size}` : \"\"}</span>\n                  </div>\n\n                  <div className=\"flex items-center gap-2\">\n                    {payments[name]?.map((pay, i) => (\n                      <div key={i} className=\"flex items-center gap-1\">\n                        <span className=\"text-xs text-gray-600\">{renderPaymentLabel(pay)}</span>\n                        <button onClick={(e) => { e.stopPropagation(); removePayment(name, i); }} className=\"text-red-400 text-[10px]\">✕</button>\n                      </div>\n                    ))}\n                    {currentPkg && currentPkg.used >= currentPkg.size && (\n                      <button onClick={(e) => { e.stopPropagation(); removeClientFromList(name); }} className=\"text-red-500 text-xs\">✕</button>\n                    )}\n                  </div>\n                </div>\n\n                {expandedClients[name] && (\n                  <ul className=\"text-xs text-gray-600 ml-4 list-disc mt-1\">\n                    {bookings.filter((b) => b.clientName === name).map((b) => (\n                      <li key={b.id}>{b.sessionNumber}/{(packages[name] && packages[name][b.packageIndex]) ? packages[name][b.packageIndex].size : \"?\"} – {formatBookingDate(b.dateISO)}</li>\n                    ))}\n                    { (bookings.filter((b) => b.clientName === name).length === 0) && (\n                      <li>Нет записей</li>\n                    )}\n                  </ul>\n                )}\n              </li>\n            );\n          })}\n\n          {Object.keys(packages).length === 0 && <li className=\"text-sm text-gray-500\">Нет данных</li>}\n        </ul>\n\n        <div className=\"mt-2 flex gap-4\">\n          <button onClick={() => openPackageModal(\"\")} className=\"text-xs text-green-600\">+ Добавить пакет клиенту</button>\n          <button onClick={() => openPaymentModal(\"\")} className=\"text-xs text-green-600\">+ Добавить оплату</button>\n        </div>\n      </div>\n\n      {modalOpen && (\n        <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50\" onClick={() => setModalOpen(false)}>\n          <div className=\"bg-white p-4 rounded w-80\" onClick={(e) => e.stopPropagation()}>\n            <h3 className=\"font-semibold mb-2\">Добавить запись</h3>\n            <p className=\"text-sm mb-2\">{modalDate && format(modalDate, \"d LLL (EEE)\", { locale: ruLocale })} — {formatHourForTH(modalHour)} (TH) / {formatHourForRU(modalHour)} (RU)</p>\n            <select value={modalClient} onChange={(e) => setModalClient(e.target.value)} className=\"border w-full px-2 py-1 rounded mb-3\">\n              <option value=\"\">Выберите клиента</option>\n              {activeClients().map((c) => <option key={c} value={c}>{c}</option>)}\n            </select>\n\n            <div className=\"flex gap-2\">\n              <button onClick={addBooking} className=\"flex-1 bg-blue-600 text-white py-1 rounded\">Сохранить</button>\n              <button onClick={() => setModalOpen(false)} className=\"flex-1 bg-gray-200 py-1 rounded\">Отмена</button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {packageModalOpen && (\n        <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50\" onClick={() => setPackageModalOpen(false)}>\n          <div className=\"bg-white p-4 rounded w-80\" onClick={(e) => e.stopPropagation()}>\n            <h3 className=\"font-semibold mb-2\">Добавить пакет</h3>\n            <input type=\"text\" value={packageClient} onChange={(e) => setPackageClient(e.target.value)} placeholder=\"Имя клиента\" className=\"border w-full px-2 py-1 rounded mb-3\" />\n            <select value={packageSize} onChange={(e) => setPackageSize(Number(e.target.value))} className=\"border w-full px-2 py-1 rounded mb-3\">\n              <option value={10}>Пакет 10</option>\n              <option value={20}>Пакет 20</option>\n            </select>\n            <div className=\"flex gap-2\">\n              <button onClick={savePackage} className=\"flex-1 bg-blue-600 text-white py-1 rounded\">Сохранить</button>\n              <button onClick={() => setPackageModalOpen(false)} className=\"flex-1 bg-gray-200 py-1 rounded\">Отмена</button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {paymentModalOpen && (\n        <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50\" onClick={() => setPaymentModalOpen(false)}>\n          <div className=\"bg-white p-4 rounded w-80\" onClick={(e) => e.stopPropagation()}>\n            <h3 className=\"font-semibold mb-2\">Добавить оплату</h3>\n            <select value={paymentClient} onChange={(e) => setPaymentClient(e.target.value)} className=\"border w-full px-2 py-1 rounded mb-3\">\n              <option value=\"\">Выберите клиента</option>\n              {Object.keys(packages).map((k) => <option key={k} value={k}>{k}</option>)}\n            </select>\n            <input type=\"text\" value={paymentAmount} onChange={(e) => setPaymentAmount(e.target.value)} placeholder=\"Сумма (например, 12000)\" className=\"border w-full px-2 py-1 rounded mb-3\" />\n            <input type=\"text\" value={paymentDay} onChange={(e) => setPaymentDay(e.target.value)} placeholder=\"Число месяца (например, 15)\" className=\"border w-full px-2 py-1 rounded mb-3\" />\n            <div className=\"flex gap-2\">\n              <button onClick={savePayment} className=\"flex-1 bg-blue-600 text-white py-1 rounded\">Сохранить</button>\n              <button onClick={() => setPaymentModalOpen(false)} className=\"flex-1 bg-gray-200 py-1 rounded\">Отмена</button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}